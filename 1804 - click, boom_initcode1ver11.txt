document.getElementById("inner_window_1").children[0].innerHTML=`<h3>Do you have what it takes to be President of the United States?</h3>`

document.getElementById("inner_window_1").children[1].innerHTML = `<li>As President Aaron Burr, attempt to keep everyone satisfied as you do your patriotic duty and stay prepared for the 1804 Election.</li>
<li>This mod features tooltips as a tool for worldbuilding and advisor opinions. It is reccomended that you pay attention to the <i>advisor</i> tooltips <span class=\'mytooltip\' style="background-color:lightgray;">like these.<span class=\'mytooltiptext\'><b>This is an advisor tooltip.</b><br>These tooltips tell you your advisors opinions on answer options. <i>Advisors may be wrong.</i></span></span> There are also <i>image</i> tooltips <span class=\'mytooltip\' style="background-color:lightgray;">such as these.<span class=\'mytooltiptext\'><img src=https://i.imgur.com/zxrG22V.png></span></span> These can be ignored without hurting your experience.</li>
<li>Spend your time trying to walk the line of satisfaction, or pander to specific groups as you attempt to please the nation.</li><li>This mod is made to be replayed, and if you enjoy it, I recommend you do.</li><li>This mod includes music. It is recommended as I think it adds to the atmosphere, but is not required at all.</li><li>Good luck, Mr President.</li>`; 	


campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 5,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 1804,
            "display_year": "1804 - click, boom",
            "summary": "<h3 style=\"color:#0000;\">haha<h2>\n<h2\nstyle=\"color:#8b0000;\">THE YEAR IS 1801.</h3>\n<p>\n\nThe republic is young.<br>\n<p>\n<b\nstyle=\"color:#1b2e83;\">Aaron Burr sits in the President‚Äôs chair</b>.\n</p>\n<h3 style=\"color:#0000;\">choose wisely.<h2>\n",
            "image_url": "https://i.imgur.com/nodwbkW.png",
            "winning_electoral_vote_number": 89,
            "advisor_url": "https://i.imgur.com/uqhVYZf.png",
            "recommended_reading": `<h2>Message and Thanks</h2> <h3>by DotCom</h3> <div style="display:flex;justify-content:space-between;align-items:flex-start;"> <div style="max-width:60%;margin-right:2em;"> <p>Win or lose, Aaron Burr has always been an interesting figure in history to me.</p> <p>The guy wasn't even known about by the general public until <a href="https://en.wikipedia.org/wiki/Hamilton_(musical)">Hamilton</a> (the musical) came around in the 2010s. For those that did know about him though, he was painted as this villanous troublemaker who wanted America to burn.</p> <p>If you‚Äôre reading this, it means you know that this isn't the case, and that Burr was actually a main source of <i>"progressive"</i> values (for his time). I made this mod to further spread that truth. He wasn't a saint by any means (I mean, who was back then), but he was a person. A person who shouldn't be put on a pedestal, or made into a villain, or made into an idol, because he was just a guy who <b>REALLY</b> wanted to be President.</p></div> <div style="text-align:center;"> <img src="https://i.imgur.com/jbah1JB.png" style="max-height:200px;width:auto;"> </div> </div> <hr/> <p>I hope you enjoyed playing this mod! If this is your first go around, make sure to play it a few more times, as there's more than one path you can take. Thank you!</p>`,
            "has_visits": 1,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 1804,
        "is_premium": 0,
        "display_year": "1804 - click, boom"
    }
]

campaignTrail_temp.difficulty_level_json = JSON.parse("[{\"model\": \"campaign_trail.difficulty_level\", \"pk\": 1, \"fields\": {\"name\": \"Beginner\", \"multiplier\": 1.1}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 3, \"fields\": {\"name\": \"Normal\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 4, \"fields\": {\"name\": \"Challenging\", \"multiplier\": 0.95}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 5, \"fields\": {\"name\": \"Throwaway\", \"multiplier\": 0.93}}]");

campaignTrail_temp.credits = "<button onclick='credits()'>the following...</button>"

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 131,
        "fields": {
            "first_name": "Aaron",
            "last_name": "Burr",
            "election": 20,
            "party": "Democratic-Republican",
            "state": "New York",
            "priority": 1,
            "description": "<p><h3>Aaron Burr shouldn't be here.</h2></p>\n\n<p>After defying all odds and winning the presidency in the 1801 contingent presidential election, he is left wondering why he is here and what he should do.</p>\n\n<p>Burr must now shape his political views and strike a balance to keep Federalists and Democratic-Republicans from revolting against his administration. As someone who has previously never laid any major political opinions out, Burr must now take a stand and continue the prosperity of the United States of America.",
            "color_hex": "#3f623c",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.imgur.com/dzWZ7PN.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 137,
        "fields": {
            "first_name": "Thomas",
            "last_name": "Jefferson",
            "election": 20,
            "party": "Democratic-Republican",
            "state": "Virginia",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#3f623c",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/CWAlVPm.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p><h3>It didn't feel like real life.</h2></p>\n\n<p>On the 36th ballot, Aaron Burr had pushed on to the finish line.</p>\n\n<table>\n  <tr>\n    <th>Burr</th>\n    <th>Jefferson</th>\n    <th>Blank</th>\n  </tr>\n  <tr>\n    <td>9</td>\n    <td>6</td>\n    <td>1</td>\n  </tr>\n  <tr>\n  </tr>\n</table>\n\n<p>Thomas Jefferson was left with the award that second place brings: the Vice Presidency.</p>\n\n<p>Now, Burr must work with Jefferson and give him influence in the administration, or else he should expect to face him in the next presidential election.",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 133,
        "fields": {
            "first_name": "Alexander",
            "last_name": "Hamilton",
            "election": 20,
            "party": "Federalist",
            "state": "New York",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#bc9467",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "",
            "electoral_loss_message": "",
            "no_electoral_majority_message": "",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14582,
        "fields": {
            "first_name": "",
            "last_name": "Dem-Rep Opposition",
            "election": 20,
            "party": "",
            "state": "",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#054e66",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14605,
        "fields": {
            "first_name": "",
            "last_name": "Fed Opposition",
            "election": 20,
            "party": "",
            "state": "",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#84244b",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 133709,
        "fields": {
            "candidate": 131,
            "running_mate": 137
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            131,
            133,
            14582,
            14605
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            131,
            133,
            14582,
            14605
        ]
    }
]

jet_data = {
    "headerColor": "#151515",
    "windowColor": "#151515",
    "containerColor": "#636363",
    "innerWindowColor": "#636363",
    "bannerImageUrl": "https://i.imgur.com/YAiOkS1.png",
    "backgroundImageUrl": "https://i.imgur.com/4InrgNP.png",
    "endingTextColor": "#000000",
    "customQuote": "",
    "gameTitle": "openly campaigning trail"
}

  const creditsItemsA = [
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/jNaedA7.png', name: 'Mangolith', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/GZoT8V6.gif', name: 'QuoProQuid', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/1zsFUQB.png', name: 'CTA', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/dC2ezIA.png', name: 'RouteVenus', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/P13F0XS.png', name: 'Bonbishka', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/DfYceh6.png', name: 'River', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/2rzmglr.png', name: 'Ettingermentum', text: '', button: 'Defer', id: 'XXX'},
      { photo: 'https://mangolith.com/ProjectPics/WfileReUp/gKHj8w6.png', name: 'StockdaleForTCT', text: '', button: 'Defer', id: 'XXX'},
  ]

  credits = function() {
    credits = ["CODER", "Mangolith", "", "WRITERS", "QuoProQuid, CTA, Routevenus, Bonbishka, River, Ettingermentum", "", "SPECIAL THANKS", "Jet, Nina, Obummer, RouteVenus", "", "BASE MAP", "u/Retassin and u/AMETSFAN", "", "ANOTHER GREATFUL THANKS", "QuoProQuid"]
    let questions = document.querySelector(".inner_window_question");

    // Check if the menu already exists
    let popOutMenu = document.getElementById('popOutMenu');
    if (!popOutMenu) {
        popOutMenu = document.createElement('div');
        popOutMenu.id = 'popOutMenu';
        popOutMenu.style.position = 'absolute'; // Change to absolute for relative positioning
        popOutMenu.style.width = '464px';
        popOutMenu.style.height = '514px';
        popOutMenu.style.backgroundColor = '#fff';
        popOutMenu.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.1)';
        popOutMenu.style.zIndex = '1000';
        popOutMenu.style.backgroundImage = 'url("https://mangolith.com/ProjectPics/WfileReUp/CZhluri.png")';
        popOutMenu.style.backgroundSize = 'cover';
        popOutMenu.style.backgroundPosition = 'center';
        popOutMenu.style.alignItems = 'center';     

        const qpic = document.createElement('img');
        qpic.src = "https://mangolith.com/ProjectPics/WfileReUp/X3fTEqD.png";
        qpic.style.width = '135px';
        qpic.style.height = '152px';
        qpic.style.position = "absolute";
        qpic.style.top = "116px";  
        qpic.style.left = "288px"; 
        popOutMenu.appendChild(qpic);

        //<b><span style="color: #D9321E;">
        var overviewtxt  = "<center>ùêñ.<br><i>LIVE</i> Update Credits<br><br>Special Thanks to:</center><br>‚Ä¢ Jet for UI assistance<br>‚Ä¢ Nina for the music player<br>‚Ä¢ Obummer for the candidate swapper<br>‚Ä¢ RouteVenus for art assets"

        const ovsubtxt = document.createElement('p');
        ovsubtxt.innerHTML = overviewtxt;
        ovsubtxt.style.textAlign = 'left';
        ovsubtxt.style.position = "absolute";
        ovsubtxt.style.lineHeight = '1.3';
        ovsubtxt.style.top = "116px";  
        ovsubtxt.style.left = "13px"; 
        popOutMenu.appendChild(ovsubtxt);


        const menuListA = document.createElement('ul');
        menuListA.style.listStyle = 'none';
        menuListA.style.position = "absolute";
        menuListA.style.top = "295px";  
        menuListA.style.right = "12px"; 
        menuListA.style.padding = '0';
        menuListA.style.maxHeight = '199px'; 
        menuListA.style.overflowY = 'auto'; 

        // Add menu items from the array
        creditsItemsA.forEach(item => {
            const menuItem = document.createElement('div');
            menuItem.style.display = 'flex';
            menuItem.style.alignItems = 'flex-start';
            menuItem.style.backgroundImage = 'url("https://mangolith.com/ProjectPics/WfileReUp/BSUjwAQ.png")';
            menuItem.style.marginBottom = '1px';
            menuItem.style.width = '438px';
            menuItem.style.height = '90px';
            menuItem.style.backgroundColor = 'rgba(128, 142, 142, 0.5)'; 

            const photo = document.createElement('img');
            photo.src = item.photo;
            photo.style.border = "1px solid #000000"; 
            photo.style.padding = "1px"; 
            photo.style.width = '85px';
            photo.style.height = '85px';
            photo.style.marginRight = '10px';

            const textAndButton = document.createElement('div');

            const name = document.createElement('p');
            name.style.fontSize = "15px"; 
            name.style.color = "#006699"; 
            name.innerHTML = item.name; 
            name.style.fontFamily = "Arial, sans-serif"; 
            name.style.textRendering = "optimizeSpeed"; 
            name.style.webkitFontSmoothing = "none"; 
            name.style.mozOsxFontSmoothing = "none"; 
            name.style.fontWeight = "450"; 
            name.style.position = "absolute";  
            name.style.marginLeft = "4px";    
            name.style.marginTop = "5px";    
            textAndButton.appendChild(name);

            const text = document.createElement('p');
            text.style.fontSize = "12px"; 
            text.innerHTML = item.text; 
            text.style.fontFamily = "Arial, sans-serif"; 
            text.style.textRendering = "optimizeSpeed"; 
            text.style.webkitFontSmoothing = "none"; 
            text.style.mozOsxFontSmoothing = "none"; 
            text.style.fontWeight = "450"; 
            text.style.position = "absolute"; 
            text.style.marginLeft = "-7px";    
            text.style.marginTop = "29px";    

            textAndButton.appendChild(text);
            menuItem.appendChild(photo);
            menuItem.appendChild(textAndButton);

            menuListA.appendChild(menuItem);
        });
        popOutMenu.appendChild(menuListA);

        const closeButton = document.createElement('button');
        closeButton.id = "closeButton"; 
        const closeIcon = document.createElement('img');
        closeIcon.id = "closeIcon"; 

        closeIcon.src = "https://mangolith.com/ProjectPics/WfileReUp/cThipKS.png";
        closeIcon.alt = "Close";

        closeButton.style.position = "absolute";
        closeButton.style.top = "-6px";  
        closeButton.style.right = "-57px";

        closeButton.appendChild(closeIcon);
        closeButton.onclick = closeSurrogates;
        popOutMenu.appendChild(closeButton);

        document.body.appendChild(popOutMenu);

        makeDraggable(popOutMenu);
    } 

    if (savedX !== null && savedY !== null) {
        popOutMenu.style.left = savedX + 'px';
        popOutMenu.style.top = savedY + 'px';
    }
    else {
        const buttonRect = event.target.getBoundingClientRect();
        popOutMenu.style.left = buttonRect.right + 353 + 'px'; 
        popOutMenu.style.top = buttonRect.top - 292 + 'px'; 
        savedX = popOutMenu.getBoundingClientRect().left;
        savedY = popOutMenu.getBoundingClientRect().top;
    }

    // Display the menu
    popOutMenu.style.display = 'block';
  }
 
  function closeSurrogates() {
    const popOutMenu = document.getElementById('popOutMenu');
    if (popOutMenu) {
        savedX = popOutMenu.getBoundingClientRect().left;
        savedY = popOutMenu.getBoundingClientRect().top;

        popOutMenu.remove();
    }
  }

  function refreshSurrogates() {
    const popOutMenu = document.getElementById('popOutMenu');
    if (popOutMenu) {
        popOutMenu.remove();
        openSurrogates();
    }
  }

  function makeDraggable(element) {
    let isDragging = false;
    let offsetX, offsetY;

    element.onmousedown = function(event) {
        isDragging = true;
        offsetX = event.clientX - element.getBoundingClientRect().left;
        offsetY = event.clientY - element.getBoundingClientRect().top;

        document.onmousemove = function(event) {
            if (isDragging) {
                const newX = event.clientX - offsetX;
                const newY = event.clientY - offsetY;

                // Update the position of the element
                element.style.left = newX + 'px';
                element.style.top = newY + 'px';

                // Save the position in global variables
                savedX = newX;
                savedY = newY;
            }
        };

        document.onmouseup = function() {
            isDragging = false;
            document.onmousemove = null;
            document.onmouseup = null;
        };
    };
  }

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0
e.currentTrackIndex = 0 // Track the current song index

toTime = (seconds) => {
    var date = new Date(null);
    date.setSeconds(seconds);
    return date.toISOString().substr(11, 8);
}

// Map track index to image URLs
const trackImages = [
    "https://upload.wikimedia.org/wikipedia/en/3/3b/Dark_Side_of_the_Moon.png", // Time - Pink Floyd
    "https://upload.wikimedia.org/wikipedia/en/1/13/PinkFloydWallCoverOriginalNoText.jpg", // Nobody Home - Pink Floyd
    "https://upload.wikimedia.org/wikipedia/en/3/38/Soundtrack_From_Twin_Peaks.jpg", // Twin Peaks - Angelo Badalamenti
    "https://upload.wikimedia.org/wikipedia/en/0/02/Radioheadkida.png", // Everything - Radiohead
    "https://upload.wikimedia.org/wikipedia/en/5/5b/Hamilton_cast_recording_cover.jpeg", // The Room Where It Happens - Hamilton Original Cast
    "https://upload.wikimedia.org/wikipedia/en/3/34/SurferRosa.jpg", // Gigantic - Pixies
];

function getTrackImage(trackIdx) {
    return trackImages[trackIdx] || "https://i.imgur.com/s2fy6T1.gif";
}

function changeSong(direction) {
    let tracklist = soundtracks[e.selectedSoundtrack].tracklist;
    let newIndex;
    
    if (direction === 'next') {
        newIndex = (e.currentTrackIndex + 1) % tracklist.length;
    } else {
        newIndex = (e.currentTrackIndex - 1 + tracklist.length) % tracklist.length;
    }
    
    e.currentTrackIndex = newIndex;
    
    let audio = document.getElementById("campaigntrailmusic");
    audio.src = tracklist[newIndex].url;
    audio.currentTime = 0;
    audio.play();
    
    // Update image and song name
    let img = document.getElementById("musicPlayerTrackImage");
    img.src = getTrackImage(newIndex);
    
    let songName = document.getElementById("song-name-display");
    songName.innerHTML = tracklist[newIndex].name;
    
    // Update pause/play button
    let pausePlayBtn = document.getElementById("music-pauseplay");
    pausePlayBtn.style.backgroundImage = "url('https://i.imgur.com/42KM54o.png')";
}

function newMusicPlayer() {
    // Remove old player if exists
    let old = document.getElementById("musicPlayerMerged");
    if (old) old.remove();

    // Main container
    let merged = document.createElement("div");
    merged.id = "musicPlayerMerged";
    merged.style.color = "white";
    merged.style.display = "flex";
    merged.style.flexDirection = "row";
    merged.style.background = "#181818";
    merged.style.border = "3px solid #c9c9c9";
    merged.style.width = "100%";
    merged.style.margin = "0";
    merged.style.overflow = "hidden";
    merged.style.boxSizing = "border-box";
    merged.style.position = "relative";
    merged.style.left = "0";
    merged.style.right = "0";

    // Stretch to footer
    let footer = document.getElementById("footer");
    if (footer) {
        footer.style.position = "relative";
        footer.style.padding = "0";
        footer.style.margin = "0";
    }

    // Left: image
    let imgDiv = document.createElement("div");
    imgDiv.style.flex = "0 0 170px";
    imgDiv.style.display = "flex";
    imgDiv.style.alignItems = "center";
    imgDiv.style.justifyContent = "center";
    imgDiv.style.background = "#200e0e";
    imgDiv.style.height = "100%";
    let img = document.createElement("img");
    img.src = getTrackImage(0);
    img.id = "musicPlayerTrackImage";
    img.style.maxHeight = "250px";
    img.style.maxWidth = "250px";
    imgDiv.appendChild(img);

    // Right: controls
    let controlsDiv = document.createElement("div");
    controlsDiv.style.flex = "1";
    controlsDiv.style.padding = "10px";
    controlsDiv.style.overflowY = "auto";
    controlsDiv.style.height = "100%";
    controlsDiv.style.boxSizing = "border-box";
    controlsDiv.style.display = "flex";
    controlsDiv.style.flexDirection = "column";
    controlsDiv.style.justifyContent = "space-between";

    // Song name display at the top
    let songDisplay = document.createElement("div");
    songDisplay.style = `
        text-align: left;
        background-color: #181818;
        padding: 10px;
        margin-top: 10px;
        font-size: 22px;
        font-weight: 900;
    `;
    songDisplay.id = "song-name-display";
    songDisplay.innerHTML = soundtracks[e.selectedSoundtrack].tracklist[0].name;
    controlsDiv.appendChild(songDisplay);

    // Middle content area (can be filled with other elements if needed)
    let middleContent = document.createElement("div");
    middleContent.style.flex = "1";
    middleContent.style.margin = "33px";
    controlsDiv.appendChild(middleContent);

    // Time controls at the bottom
    let timeTracker = document.createElement("div");
    timeTracker.style = `
        text-align: left;
        background-color: #181818;
        padding: 6px;
        margin-bottom: 1px;
    `;

    // Controls container for buttons
    let controlsContainer = document.createElement("div");
    controlsContainer.style = `
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-bottom: 10px;
    `;

    // Previous button
    var prevButton = document.createElement("button");
    prevButton.id = "music-prev";
    prevButton.style = `
        width: 40px;
        height: 40px;
        background-image: url('https://i.imgur.com/4C7iNIk.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-color: transparent;
        border: none;
        cursor: pointer;
    `;
    prevButton.addEventListener("click", event => {
        event.preventDefault();
        changeSong('prev');
    });
    
    // Pause/play button
    var pausePlay = document.createElement("button");
    pausePlay.id = "music-pauseplay";
    pausePlay.style = `
        width: 40px;
        height: 40px;
        background-image: url('https://i.imgur.com/42KM54o.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-color: transparent;
        border: none;
        cursor: pointer;
    `;
    
    // Next button
    var nextButton = document.createElement("button");
    nextButton.id = "music-next";
    nextButton.style = `
        width: 40px;
        height: 40px;
        background-image: url('https://i.imgur.com/NHtbXH4.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-color: transparent;
        border: none;
        cursor: pointer;
    `;
    nextButton.addEventListener("click", event => {
        event.preventDefault();
        changeSong('next');
    });
    
    // Add buttons to container
    controlsContainer.appendChild(prevButton);
    controlsContainer.appendChild(pausePlay);
    controlsContainer.appendChild(nextButton);
    timeTracker.appendChild(controlsContainer);

    // Time progress container
    let timeProgressContainer = document.createElement("div");
    timeProgressContainer.style = `
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        margin-bottom: 5px;
    `;

    // Current time display (left)
    let currentTimeDisplay = document.createElement("span");
    currentTimeDisplay.id = "current-time-display";
    currentTimeDisplay.style = `
        min-width: 50px;
        text-align: left;
    `;
    currentTimeDisplay.innerHTML = "0:00:00";

    // Total time display (right)
    let totalTimeDisplay = document.createElement("span");
    totalTimeDisplay.id = "total-time-display";
    totalTimeDisplay.style = `
        min-width: 50px;
        text-align: right;
    `;
    totalTimeDisplay.innerHTML = "0:00:00";

    // Time slider container
    let sliderContainer = document.createElement("div");
    sliderContainer.style = `
        flex: 1;
        padding: 0 10px;
    `;

    // Time slider
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style = `
        width: 100%;
        height: 10px;
        -webkit-appearance: none;
        appearance: none;
        background: #e0e0e0;
        border-radius: 10px;
        outline: none;
    `;
    timeSlider.id = "time-slider";
    
    // Add slider styles for track and thumb
    let sliderStyle = document.createElement("style");
    sliderStyle.textContent = `
        #time-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 1);
            cursor: pointer;
            transform: translateY(-3px);
        }
        #time-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 1);
            cursor: pointer;
            border: none;
            transform: translateY(-3px);
        }
        #time-slider::-webkit-slider-runnable-track {
            height: 10px;
            border-radius: 10px;
            background: linear-gradient(to right, white 0%, white var(--progress), gray var(--progress), gray 100%);
        }
        #time-slider::-moz-range-track {
            height: 10px;
            border-radius: 10px;
            background: gray;
        }
        #time-slider::-moz-range-progress {
            height: 10px;
            border-radius: 10px;
            background: white;
        }
    `;
    document.head.appendChild(sliderStyle);

    sliderContainer.appendChild(timeSlider);
    
    // Add time displays and slider to container
    timeProgressContainer.appendChild(currentTimeDisplay);
    timeProgressContainer.appendChild(sliderContainer);
    timeProgressContainer.appendChild(totalTimeDisplay);
    
    // Add to time tracker
    timeTracker.appendChild(timeProgressContainer);

    // Keep the old position display for compatibility but hide it
    var positionDisplay = document.createElement("span");
    positionDisplay.id = "position-display";
    positionDisplay.style.display = "none";
    timeTracker.appendChild(positionDisplay);

    controlsDiv.appendChild(timeTracker);

    merged.appendChild(imgDiv);
    merged.appendChild(controlsDiv);

    // Insert merged player
    musicBox.appendChild(merged);

    // Set up audio element
    musicBox.children[2].loop = false
    musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

    musicBox.children[2].onended = function() {
        changeSong('next');
    }

    // Time logic
    var audio = document.getElementById("campaigntrailmusic");

    function updatePositionDisplay() {
        const currentTime = toTime(audio.currentTime);
        const totalTime = audio.duration ? toTime(audio.duration) : "0:00:00";
        const progress = audio.duration ? (audio.currentTime / audio.duration) * 100 : 0;
        
        // Update the old display for compatibility
        positionDisplay.innerHTML = "<b>Time:</b> " + currentTime + "<br>";
        
        // Update the new displays
        currentTimeDisplay.innerHTML = currentTime;
        totalTimeDisplay.innerHTML = totalTime;
        
        // Update slider value
        timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
        
        // Update slider colored progress
        timeSlider.style.setProperty('--progress', `${progress}%`);
    }

    function changeTime() {
        audio.currentTime = timeSlider.value * audio.duration;
        updatePositionDisplay();
    }

    pausePlay.addEventListener("click", event => {
        event.preventDefault();
        updatePositionDisplay();
        let audio = document.getElementById("campaigntrailmusic");
        if (audio.paused) {
            audio.play();
            pausePlay.style.backgroundImage = "url('https://i.imgur.com/42KM54o.png')";
        } else {
            audio.pause();
            pausePlay.style.backgroundImage = "url('https://i.imgur.com/42KM54o.png')";
        }
    });

    setInterval(updatePositionDisplay, 1000);
    timeSlider.addEventListener("input", changeTime);

    updatePositionDisplay();
}

clamp = function(a, max, min, overflow=true) {
    if (overflow) {
        return a > max ? min : a < min ? max : a;
    }
    return a > max ? max : a < min ? min : a;
}

// Track list

var soundtracks = {
    0: {
        name: "BurrMain",
        tracklist: [
            {
                "name": "Time - Pink Floyd",
                "url": "https://audio.jukehost.co.uk/ApgBsXllbHRruIUHWUhB7bHA8Y2V3lSG"
            },
            {
                "name": "Nobody Home - Pink Floyd",
                "url": "https://audio.jukehost.co.uk/hYzHBM3N6hveq2NvdkIfdfk9LiOC5qEb"
            },
            {
                "name": "Twin Peaks Theme - Angelo Badalamenti",
                "url": "https://audio.jukehost.co.uk/zc3dKgPNYoZgIugVi0wsPDsBfhetZ6ai"
            },
            {
                "name": "Everything In Its Right Place - Radiohead",
                "url": "https://audio.jukehost.co.uk/u7BwkRJo0MM3vT8kdshb1zuOmgwhCzN7"
            },
            {
                "name": "The Room Where It Happens - Hamilton Original Cast",
                "url": "https://audio.jukehost.co.uk/oKaGKquFnFWBXCIGJro6nQmqaLjzmN8Q"
            },
            {
                "name": "Gigantic - Pixies",
                "url": "https://audio.jukehost.co.uk/lXwCfeZflGLkzsENcinu4lJETtOoDlr6"
            }
        ]
    }
}

// Set up new music player

newMusicPlayer()

campaignTrail_temp.achievements = {
  
  "Before The Fall" : {
  "image" : "https://i.imgur.com/LRHoTL9.png",
  "description" : "As Aaron Burr, don't make history.",
  "cannotBeCheated" : true
  },

  "Don't Sink" : {
    "image" : "https://i.imgur.com/DWoYvoy.png",
    "description" : "As Aaron Burr, avoid warfare.",
    "cannotBeCheated" : true
    },

  "It Must Be Nice" : {
    "image" : "https://i.imgur.com/1Lodx9g.png",
    "description" : "As Aaron Burr, face off against a Tomcat.",
    "cannotBeCheated" : true
    },

  "Fallback" : {
    "image" : "https://i.imgur.com/gg5fidF.png",
    "description" : "As Aaron Burr, face off against a Librarian.",
    "cannotBeCheated" : true
    },

  "Yankee Doodle" : {
    "image" : "https://i.imgur.com/Xc3M9RQ.png",
    "description" : "As Aaron Burr, face off against a Major.",
    "cannotBeCheated" : true
    },

  "Sentenced" : {
    "image" : "https://i.imgur.com/ryp0yad.png",
    "description" : "As Aaron Burr, face off against a Judge.",
    "cannotBeCheated" : true
    },

  "Pursuit Of Happiness" : {
    "image" : "https://i.imgur.com/AoWsRcf.png",
    "description" : "As Aaron Burr, face off against your Partner.",
    "cannotBeCheated" : true
    },

  "The World Was Wide Enough" : {
    "image" : "https://i.imgur.com/zhgvrIu.png",
    "description" : "As Aaron Burr, change the world.",
    "cannotBeCheated" : true
    },

  "Wood Door Squeak 3" : {
    "image" : "https://i.imgur.com/d8fFtAT.png",
    "description" : "As Aaron Burr, make it about you.",
    "cannotBeCheated" : true
    },

  "First Time For Everything" : {
    "image" : "https://i.imgur.com/M76aAzc.png",
    "description" : "As Aaron Burr, be remembered as a failed experiment.",
    "cannotBeCheated" : true
    },

  "Evil Man" : {
    "image" : "https://i.imgur.com/KDbZQVr.png",
    "description" : "As Aaron Burr, take over.",
    "cannotBeCheated" : true
    },

  "Wait For It" : {
    "image" : "https://i.imgur.com/B65ZdHi.png",
    "description" : "As Aaron Burr, walk the line to victory.",
    "cannotBeCheated" : true
    },
    
  "On The Road Again" : {
    "image" : "https://i.imgur.com/k3pjRkO.png",
    "description" : "As Aaron Burr, reconcile an old friendship.",
    "cannotBeCheated" : true
    },

  "Things That Never Were" : {
    "image" : "https://i.imgur.com/TMOVWqT.png",
    "description" : "As Aaron Burr, delay curtain call.",
    "cannotBeCheated" : true
    },
}

//#startcode


corrr = '\n              <h2>openly campaigning trail</h2>\n            ';

// Custom favicon
$("#dynamic-favicon").attr("href", "https://i.imgur.com/xptQJD1.jpeg");

// Election night descs
e.ElectionPopup = "Time's up, Mr. President."
e.WinPopup = "History has its eyes on you."
e.LosePopup = "Now I‚Äôm the villain in your history."
e.SelAnsContText = "Please make your decision, Mr. President."

campaignTrail_temp.modBoxTheme = {
     "header_color": "#151515",
     "header_text_color": "#ffffff",
     "description_text_color": "#000000",
     "description_background_color": "#ffffff",
     "main_color": "#1c1c1c",
     "secondary_color": "#151515",
     "ui_text_color": "#FFFFFF"
}


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#151515";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#151515";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#525252";

document.getElementById("header").src = "https://i.imgur.com/YAiOkS1.png";

document.body.background = "https://i.imgur.com/4InrgNP.png";

document.head.innerHTML += "<style>#results_container {color:#ffffff;} .inner_window_w_desc {background-color:#525252!important;}</style>";  

  
        
  
  
  

  
  
  e = campaignTrail_temp
  
  document.head.innerHTML += `
  <link rel="stylesheet" href="https://kexanie.github.io/csswin10">
  <style>
  h3 {
    font-size: 1.025em !important;
    line-height: 17px;
}
label {
    font-size: 0.9em !important; 
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif !important;
    line-height: 1.0; 
}
input {
    font-size: 0.9em !important; 
    line-height: 17px; 
}

  
  #game_window{max-width:1000px;}
  </style>`
  let contentBox = document.getElementsByClassName("content_box")[0];
  let contentSingle = document.getElementsByClassName("content_single")[0];
  
  let containerRef = document.getElementsByClassName("container")[0];
  
  function createBanner(url, sibling, isLeft) {
    let div = document.createElement("DIV");
    let img = document.createElement("IMG");
    div.style.position = "relative";
    div.style.margin = "auto";
    img.src = url;
    
    
  
    let x = document.createElement("DIV");
    x.innerText = "_";
    x.style.position = "absolute";
    x.style.padding = "2px";
    x.style.fontSize = "2pt";
    x.style.cursor = "pointer";
  
    div.appendChild(x);
  
    div.appendChild(img);
  
    if(isLeft) {
        sibling.parentNode.insertBefore(div, sibling);
    }
    else {
        sibling.parentNode.appendChild(div);
    }
    x.onclick = () => div.style.visibility = "hidden";
    x.onclick = () => img.style.visibility = "hidden";
    return img;
  }
  
  function addDynamicCSS() {
    var css = `
  
        label {
          cursor:default;
        }
  
        .inner_window_question h3 .mytooltip{
            background-color: lightgray;
        }
  
        .mytooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background-color:  lightgray;
        }
  
        .mytooltip .mytooltiptext {
            width: 240px;
            background-color:  #151515;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 99;
            bottom: 20%;
            left: 20%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 3px solid #c9c9c9;
            pointer-events: none;
            font-size: 13px !important;
            line-height: 1.5em !important;
            font-weight: normal !important;
            font-style: normal !important;
        }
  
        .mytooltip .mytooltiptext img {
            max-width: 240px;
            height: auto;
        }
  
        .mytooltip:hover .mytooltiptext {
            opacity: 1;
            transition-delay: 0.5s;
        }
    `;
  
    var styleElem = document.createElement('style');
    styleElem.type = 'text/css';
    
    styleElem.appendChild(document.createTextNode(css));
    
    document.head.appendChild(styleElem);
  }
  
  
  addDynamicCSS();
    
    tooltipList = [
      // Q1
      {searchString: "contingent election", explanationText: "<img src=https://i.imgur.com/rkqxAdd.png> "},
      {searchString: "Hamilton", explanationText: "<img src=https://i.imgur.com/tuGsc2m.png> "},
      {searchString: "Jefferson", explanationText: "<img src=https://i.imgur.com/YwdhN62.png> "},
      {searchString: "Federalists", explanationText: "<img src=https://i.imgur.com/6GVUSPT.png> "},
      {searchString: "Democratic-Republican", explanationText: "<img src=https://i.imgur.com/An3xlM2.png> "},
      {searchString: "Democratic-Republicans", explanationText: "<img src=https://i.imgur.com/An3xlM2.png> "},
      // Q2
      {searchString: "Madison", explanationText: "<img src=https://i.imgur.com/pHz7jhw.png> "},
      {searchString: "It has to be Madison", explanationText: "<b>Your advisors don't think this is a good idea.</b><br><i>You made a deal with the Federalists when you got them to vote you into office, Mr. President. They would probably like to see one of their own in your cabinet.</i>"},
      {searchString: "President of the United States", explanationText: "<img src=https://i.imgur.com/JFs1Bph.png> "},
      {searchString: "Rufus King", explanationText: "<img src=https://i.imgur.com/cpg1BFA.png> "},
      // Q3
      {searchString: "United States", explanationText: "<img src=https://i.imgur.com/vkwYk3k.png> "},
      {searchString: "President", explanationText: "<img src=https://i.imgur.com/JFs1Bph.png> "},
      {searchString: "president", explanationText: "<img src=https://i.imgur.com/JFs1Bph.png> "},
      // Q4
      {searchString: "financial system", explanationText: "<img src=https://i.imgur.com/zTMeYOs.png> "},
      {searchString: "All the way", explanationText: "<b>Your advisors don't think this is a good idea.</b><br><i>You made a deal with the Federalists when you got them to vote you into office, Mr. President. They may take personal offense to this action.</i>"},
      // Q5
      {searchString: "Congress", explanationText: "<img src=https://i.imgur.com/zxrG22V.png> "},
      {searchString: "Get Sedgwick and Macon in my office", explanationText: "<b>Jefferson doesn't think anything will come out of this.</b><br><i>You built your campaign on walking the line, but now you have to take a stand and show the people what kind of man you are, Aaron.</i>"},
      {searchString: "Sedgwick", explanationText: "<img src=https://i.imgur.com/0U7M3Uk.png> "},
      {searchString: "Macon", explanationText: "<img src=https://i.imgur.com/LQCETFg.png> "},
      {searchString: "Tripoli", explanationText: "<img src=https://i.imgur.com/pbCF57R.png> "},


    ];


      RecReading=true
    
  // Select the node that will be observed for mutations
  const windowsAdvisorTargetNode = document.getElementById("game_window");
  
  // Options for the observer (which mutations to observe)
  const windowsAdvisorConfig = { attributes: true, childList: true, subtree: true };
  
  // Callback function to execute when mutations are observed
  const callback = (mutationList, observer) => {
      visitWindow = document.getElementsByClassName("overlay_window")[0];
  
      if(visitWindow == null || visitWindow.classList.contains("done")) {
          return;
      }
      visitWindow.classList.add("done");
      visitWindow.classList.add("window");
      let titleBar = visitWindow.querySelector("h3");
      titleBar.classList.add("title-bar");
      titleBar.classList.add("title-bar-text")
      titleBar.style.paddingLeft = "3px";
  };

HistHexcolour = ["#445D3C", "#BC9467", "#054E66"];
HistName = ["Aaron Burr", "Rufus King (Replacing Alexander Hamilton <b>‚Ä†</b>)", "Others"];
HistEV = [89, 87, 0];
HistPV = ["72,069", "68,432", "4,823"];
HistPVP = ["49.5%", "47.0%", "3.5%"];

//#endcode
